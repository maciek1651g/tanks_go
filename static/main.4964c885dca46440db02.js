(()=>{"use strict";var e,t={312:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS_NAME=void 0,(n=t.EVENTS_NAME||(t.EVENTS_NAME={})).chestLoot="chest-loot",n.attack="attack",n.scoreChange="score-change"},325:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;var r=function(e){function t(t,n,o,i,r){var s=e.call(this,t,n,o,i,r)||this;return s.hp=100,s.speed=200,s.speedUp=100,t.add.existing(s),t.physics.add.existing(s),s.getBody().setCollideWorldBounds(!0),s}return i(t,e),t.prototype.getDamage=function(e){e&&(this.hp=this.hp-e)},t.prototype.getHPValue=function(){return this.hp},t.prototype.checkFlip=function(){this.flipX=this.getBody().velocity.x<0},t.prototype.getBody=function(){return this.body},t}(n(260).Physics.Arcade.Sprite);t.Actor=r},148:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Chest=void 0;var r=function(e){function t(t,n,o,i){var r=e.call(this,t,n,o,"tiles_spr",595)||this;return r.setScale(1.5),r.setName(i),t.add.existing(r),t.physics.add.existing(r),r.chestId=i,r}return i(t,e),t.prototype.deleteChest=function(){this.destroy(!0)},t}(n(260).Physics.Arcade.Sprite);t.Chest=r},321:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=t.uid=void 0;var s=n(753);t.uid=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)};var a=function(){function e(){this.localStorage=window.sessionStorage,this.currentServerUrl="",this.currentWebSocketProtocol="",this.servers=[],this.initLocalData(),this.initServers()}return e.prototype.send=function(e){var t;if((null===(t=this.socket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN){var n={messageType:e.messageType,data:JSON.stringify(e)};this.socket.send(JSON.stringify(n))}},e.prototype.close=function(){this.socket.readyState===WebSocket.OPEN&&this.socket.close()},e.prototype.initScene=function(e){this.scene=e,this.startConnection()},e.prototype.changeServer=function(e){var t=this;e.target.blur();var n=this.gamePlayerData.id,o=this.servers.find((function(e){return e!==t.currentServerUrl})),i=encodeURIComponent(n),r=encodeURIComponent(o);console.log("".concat(window.location.protocol,"//").concat(this.currentServerUrl,"/api/users:migrate?id=").concat(i,"&url=").concat(r)),fetch("".concat(window.location.protocol,"//").concat(this.currentServerUrl,"/api/users:migrate?id=").concat(i,"&url=").concat(r),{method:"GET"}).then((function(e){200===e.status&&(t.socket.close(),t.currentServerUrl=o,t.reset())})).catch((function(e){console.log(e)}))},e.prototype.startConnection=function(){this.initConnection(),this.initCallbacks()},e.prototype.initLocalData=function(){var e=this.localStorage.getItem("game_player_data");e?this.gamePlayerData=JSON.parse(e):(this.gamePlayerData={id:(0,t.uid)(),coordinates:{x:200,y:600,directionX:1},health:100,directionX:1},this.localStorage.setItem("game_player_data",JSON.stringify(this.gamePlayerData)))},e.prototype.initServers=function(){var e=window.location.hostname,t=window.location.port;this.currentWebSocketProtocol="wss","localhost"===e?(t="8080",this.currentWebSocketProtocol="ws",this.servers=["".concat(e,":8080"),"".concat(e,":8081")]):this.servers=["tanksgo-production.up.railway.app:".concat(t),"tanks-maciejdominiak.b4a.run:".concat(t)],this.currentServerUrl=this.servers[0]},e.prototype.initConnection=function(){var e="".concat(this.currentWebSocketProtocol,"://").concat(this.currentServerUrl,"/tanks/objects:exchange");console.log(e),this.socket=new WebSocket(e)},e.prototype.initCallbacks=function(){var e=this;this.socket.onopen=function(t){e.socket.send(JSON.stringify(o(o({},e.gamePlayerData),{messageType:"create_player"}))),e.scene.initPlayer(new s.Player(e.scene,e.gamePlayerData.coordinates.x,e.gamePlayerData.coordinates.y,e.gamePlayerData.id)),console.log("connected"),console.log(e.gamePlayerData.id)},this.socket.onmessage=function(t){return i(e,void 0,void 0,(function(){var e,n;return r(this,(function(o){try{switch((e=JSON.parse(t.data)).messageType){case"create_player":this.scene.spawnOtherPlayer(e.id,e.coordinates.x,e.coordinates.y,e.health);break;case"user_disconnected":this.scene.deleteOtherPlayer(e.id);break;case"status":null===(n=this.scene.children.getByName(e.id))||void 0===n||n.updatePlayer(e.coordinates.x,e.coordinates.y,e.coordinates.directionX);break;case"user_attack":this.scene.children.getByName(e.id).attack();break;case"create_chest":this.scene.spawnChest(e.id,e.coordinates.x,e.coordinates.y);break;case"chest_destroy":this.scene.deleteChest(e.id);break;case"mob_create":this.scene.spawnEnemy(e.id,e.coordinates.x,e.coordinates.y,e.health);break;case"mob_destroy":this.scene.deleteEnemy(e.id);break;case"mob_status":this.scene.children.getByName(e.id).updateEnemy(e.coordinates.x,e.coordinates.y,e.coordinates.directionX);break;case"game_master":this.scene.setGameMaster(!0);break;case"user_health":e.id,this.gamePlayerData.id,this.scene.children.getByName(e.id).updateHealth(e.health);break;case"user_destroy":e.id===this.gamePlayerData.id?(window.game.pause(),this.socket.close(),confirm("You died. Restart?")?this.reset():window.location.href="about:blank"):this.scene.deleteOtherPlayer(e.id);break;case"user_score":this.scene.updateScore(e.score);break;default:console.log(e.messageType,"not implemented")}}catch(e){console.log(e)}return[2]}))}))},this.socket.onerror=function(e){console.log(e)},this.socket.onclose=function(t){console.log("closed"),e.reset()}},e.prototype.reset=function(){window.game.resume(),this.scene.player=void 0,this.scene.setGameMaster(!1),this.scene.scene.restart()},e}();t.Connection=a},97:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=void 0;var s=n(325),a=n(312),c=function(e){function t(t,n,o,i,r,s,c,l){var h=e.call(this,t,n,o,s,l)||this;return h.AGGRESSOR_RADIUS=200,h.target=c,h.scene=t,h.enemyId=i,h.hp=r,h.setName(i),h.setScale(1.5),h.getBody().setSize(16,16),h.attackHandler=function(){Phaser.Math.Distance.BetweenPoints({x:h.x,y:h.y},{x:h.target.x,y:h.target.y})<h.target.width&&h.sendDamage(h.target.playerId,50)},h.scene.game.events.on(a.EVENTS_NAME.attack,h.attackHandler,h),h.on("destroy",(function(){h.scene.game.events.removeListener(a.EVENTS_NAME.attack,h.attackHandler)})),h}return i(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.enemyId},enumerable:!1,configurable:!0}),t.prototype.preUpdate=function(){if(this.getBody().setVelocity(0),this.scene.gameMaster){var e=this.scene.physics.closest(this,r(r([],this.scene.otherPlayers.children.entries,!0),[this.target],!1));e&&(Phaser.Math.Distance.BetweenPoints(this,e.body.position)<this.AGGRESSOR_RADIUS?(this.getBody().setVelocityX(2*(e.body.position.x-this.x)),this.getBody().setVelocityY(2*(e.body.position.y-this.y))):this.getBody().setVelocity(0)),this.sendUpdate()}},t.prototype.sendDamage=function(e,t){var n={id:e,messageType:"mob_damage",damage:t,targetId:this.enemyId};window.connection.send(n)},t.prototype.deleteEnemy=function(){var e=this;this.disableBody(!0,!1),this.scene.time.delayedCall(100,(function(){e.destroy()}))},t.prototype.sendUpdate=function(){var e={id:this.enemyId,messageType:"mob_status",coordinates:{x:Math.round(this.x),y:Math.round(this.y),directionX:1}};JSON.stringify(e)!==JSON.stringify(this.lastSendMessage)&&(this.lastSendMessage=e,window.connection.send(e))},t.prototype.updateEnemy=function(e,t,n){this.setPosition(e,t)},t.prototype.setTarget=function(e){this.target=e},t}(s.Actor);t.Enemy=c},815:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OtherPlayer=void 0;var r=n(325),s=n(67),a=function(e){function t(t,n,o,i,r){var a=e.call(this,t,n,o,"king")||this;return a.updateSize(),a.setImmovable(!0),a.hpValue=new s.Text(a.scene,a.x,a.y-a.height,a.hp.toString()).setFontSize(12).setOrigin(.8,.5),a.updateHealth(r),a.playerId=i,a.setName(i),a}return i(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.playerId},enumerable:!1,configurable:!0}),t.prototype.updateSize=function(){this.getBody().setSize(30,30,!0)},t.prototype.updatePlayer=function(e,t,n){this.setPosition(e,t),this.flipX=-1===n,this.hpValue.setPosition(this.x,this.y-.4*this.height),this.hpValue.setOrigin(.8,.5)},t.prototype.attack=function(){this.anims.play("attack",!0),this.updateSize()},t.prototype.deletePlayer=function(){this.hpValue.destroy(!0),this.destroy(!0)},t.prototype.updateHealth=function(e){e!==this.hp&&(this.hp=e,this.hpValue.setText(this.hp.toString()))},t.prototype.getDamage=function(t){e.prototype.getDamage.call(this,t),this.hpValue.setText(this.hp.toString())},t}(r.Actor);t.OtherPlayer=a},753:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var r=n(325),s=n(67),a=n(312),c=function(e){function t(t,n,o,i){var r=e.call(this,t,n,o,"king")||this;return r.keyW=r.scene.input.keyboard.addKey("W"),r.keyA=r.scene.input.keyboard.addKey("A"),r.keyS=r.scene.input.keyboard.addKey("S"),r.keyD=r.scene.input.keyboard.addKey("D"),r.keyShift=r.scene.input.keyboard.addKey("Shift"),r.keySpace=r.scene.input.keyboard.addKey(32),r.keySpace.on("down",(function(e){r.anims.play("attack",!0),r.scene.game.events.emit(a.EVENTS_NAME.attack),r.sendAttack(),r.updateSize()})),r.updateSize(),r.hpValue=new s.Text(r.scene,r.x,r.y-r.height,r.hp.toString()).setFontSize(12).setOrigin(.8,.5),r.playerId=i,r.setName(i),r.initAnimations(),r}return i(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.playerId},enumerable:!1,configurable:!0}),t.prototype.updateSize=function(){this.getBody().setSize(35,30,!0)},t.prototype.update=function(){var e,t,n,o,i;this.getBody().setVelocity(0);var r=(null===(e=this.keyShift)||void 0===e?void 0:e.isDown)?this.speed+this.speedUp:this.speed;(null===(t=this.keyW)||void 0===t?void 0:t.isDown)&&(this.body.velocity.y=-r),(null===(n=this.keyA)||void 0===n?void 0:n.isDown)&&(this.body.velocity.x=-r,this.checkFlip()),(null===(o=this.keyS)||void 0===o?void 0:o.isDown)&&(this.body.velocity.y=r),(null===(i=this.keyD)||void 0===i?void 0:i.isDown)&&(this.body.velocity.x=r,this.checkFlip()),this.hpValue.setPosition(this.x,this.y-.4*this.height),this.hpValue.setOrigin(.8,.5),this.sendUpdate()},t.prototype.getDamage=function(t){e.prototype.getDamage.call(this,t),this.hpValue.setText(this.hp.toString())},t.prototype.sendUpdate=function(){var e={id:this.playerId,messageType:"status",coordinates:{x:Math.round(this.x),y:Math.round(this.y),directionX:this.flipX?-1:1}};JSON.stringify(e)!==JSON.stringify(this.lastSendMessage)&&(this.lastSendMessage=e,window.connection.send(e))},t.prototype.updateHealth=function(e){e!==this.hp&&(this.hp=e,this.hpValue.setText(this.hp.toString()))},t.prototype.sendAttack=function(){var e={id:this.playerId,messageType:"user_attack"};window.connection.send(e)},t.prototype.initAnimations=function(){this.scene.anims.create({key:"attack",frames:this.scene.anims.generateFrameNames("a-king",{prefix:"attack-",end:2}),frameRate:8})},t}(r.Actor);t.Player=c},729:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Score=t.ScoreOperations=void 0;var r,s=n(67);!function(e){e[e.INCREASE=0]="INCREASE",e[e.DECREASE=1]="DECREASE",e[e.SET_VALUE=2]="SET_VALUE"}(r=t.ScoreOperations||(t.ScoreOperations={}));var a=function(e){function t(t,n,o,i){void 0===i&&(i=0);var r=e.call(this,t,n,o,"Score: ".concat(i))||this;return t.add.existing(r),r.scoreValue=i,r}return i(t,e),t.prototype.changeValue=function(e,t){switch(e){case r.INCREASE:this.scoreValue+=t;break;case r.DECREASE:this.scoreValue-=t;break;case r.SET_VALUE:this.scoreValue=t}this.setText("Score: ".concat(this.scoreValue))},t.prototype.setNeWScore=function(e){this.scoreValue=e,this.setText("Score: ".concat(this.scoreValue))},t.prototype.getValue=function(){return this.scoreValue},t}(s.Text);t.Score=a},67:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var r=function(e){function t(t,n,o,i){var r=e.call(this,t,n,o,i,{fontSize:"calc(100vw / 25)",color:"#fff",stroke:"#000",strokeThickness:4})||this;return r.setOrigin(0,0),t.add.existing(r),r}return i(t,e),t}(n(260).GameObjects.Text);t.Text=r},206:(e,t,n)=>{var o=n(260),i=n(580),r=n(800),s=n(595),a=n(321),c={title:"Phaser game",type:Phaser.WEBGL,parent:"game",backgroundColor:"#351f1b",scale:{mode:Phaser.Scale.ScaleModes.NONE,width:window.innerWidth,height:window.innerHeight},physics:{default:"arcade",arcade:{debug:!1}},render:{antialiasGL:!1,pixelArt:!0},callbacks:{postBoot:function(){window.sizeChanged()}},canvasStyle:"display: block; width: 100%; height: 100%;",autoFocus:!0,audio:{disableWebAudio:!1},scene:[i.LoadingScene,r.Level1,s.UIScene]};window.sizeChanged=function(){window.game.isBooted&&setTimeout((function(){window.game.scale.resize(window.innerWidth,window.innerHeight),window.game.canvas.setAttribute("style","display: block; width: ".concat(window.innerWidth,"px; height: ").concat(window.innerHeight,"px;"))}),100)},window.onresize=function(){return window.sizeChanged()},window.connection=new a.Connection,window.game=new o.Game(c)},800:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Level1=void 0;var r=n(260),s=n(312),a=n(97),c=n(148),l=n(815),h=Phaser.GameObjects.Group,p=function(e){function t(){var t=e.call(this,"level1-scene")||this;return t.otherPlayers=new h(t),t.chests=new h(t),t.enemies=new h(t),t.gameMaster=!1,t}return i(t,e),t.prototype.create=function(){this.initMap(),window.connection.initScene(this)},t.prototype.initPlayer=function(e){this.player=e,this.physics.add.collider(this.player,this.wallsLayer),this.initCamera(),this.physics.add.collider(this.player,this.enemies,(function(e,t){var n={id:t.id,messageType:"user_damage",damage:1,targetId:e.id};window.connection.send(n)}))},t.prototype.update=function(){this.player&&this.player.update()},t.prototype.initMap=function(){this.map=this.make.tilemap({key:"dungeon",tileWidth:16,tileHeight:16}),this.tileset=this.map.addTilesetImage("dungeon","tiles"),this.groundLayer=this.map.createLayer("Ground",this.tileset,0,0),this.wallsLayer=this.map.createLayer("Walls",this.tileset,0,0),this.wallsLayer.setCollisionByProperty({collides:!0}),this.physics.world.setBounds(0,0,this.wallsLayer.width,this.wallsLayer.height)},t.prototype.showDebugWalls=function(){var e=this.add.graphics().setAlpha(.7);this.wallsLayer.renderDebug(e,{tileColor:null,collidingTileColor:new Phaser.Display.Color(243,234,48,255)})},t.prototype.initCamera=function(){this.cameras.main.setSize(this.game.scale.width,this.game.scale.height),this.cameras.main.startFollow(this.player,!0,.09,.09),this.cameras.main.setZoom(1)},t.prototype.spawnOtherPlayer=function(e,t,n,o){var i=new l.OtherPlayer(this,t,n,e,o);return this.otherPlayers.add(i),i},t.prototype.spawnChest=function(e,t,n){var o=new c.Chest(this,t,n,e);return this.chests.add(o),this.physics.add.overlap(this.player,o,(function(e,t){t.destroy(),window.connection.send({id:o.chestId,messageType:"chest_grab",playerId:e.id})})),o},t.prototype.spawnEnemy=function(e,t,n,o){var i=new a.Enemy(this,t,n,e,o,"tiles_spr",this.player,503);return this.enemies.add(i),i},t.prototype.deleteOtherPlayer=function(e){var t=this.children.getByName(e);t&&(this.otherPlayers.remove(t),t.deletePlayer())},t.prototype.deleteChest=function(e){var t=this.children.getByName(e);t&&(this.chests.remove(t),t.deleteChest())},t.prototype.deleteEnemy=function(e){var t=this.children.getByName(e);t&&(this.enemies.remove(t),t.deleteEnemy())},t.prototype.setGameMaster=function(e){e&&(this.physics.add.collider(this.enemies,this.wallsLayer),this.physics.add.collider(this.enemies,this.enemies),this.physics.add.collider(this.enemies,this.otherPlayers)),this.gameMaster=e},t.prototype.updateScore=function(e){this.game.events.emit(s.EVENTS_NAME.scoreChange,e)},t}(r.Scene);t.Level1=p},580:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingScene=void 0;var r=function(e){function t(){return e.call(this,"loading-scene")||this}return i(t,e),t.prototype.preload=function(){window.location.hostname.includes("github.io")?this.load.baseURL="https://maciek1651g.github.io/tanks_js/assets/":this.load.baseURL="./../../assets/",this.load.image("king","sprites/king.png"),this.load.atlas("a-king","spritesheets/a-king.png","spritesheets/a-king_atlas.json"),this.load.image({key:"tiles",url:"tilemaps/tiles/dungeon-16-16.png"}),this.load.tilemapTiledJSON("dungeon","tilemaps/json/dungeon.json"),this.load.spritesheet("tiles_spr","tilemaps/tiles/dungeon-16-16.png",{frameWidth:16,frameHeight:16})},t.prototype.create=function(){this.scene.start("level1-scene"),this.scene.start("ui-scene")},t}(n(260).Scene);t.LoadingScene=r},595:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.UIScene=void 0;var r=n(260),s=n(729),a=n(312),c=function(e){function t(){var t=e.call(this,"ui-scene")||this;return t.chestLootHandler=function(e){t.score.setNeWScore(e)},t}return i(t,e),t.prototype.create=function(){this.score=new s.Score(this,20,20,0),this.initListeners()},t.prototype.initListeners=function(){this.game.events.on(a.EVENTS_NAME.scoreChange,this.chestLootHandler,this)},t}(r.Scene);t.UIScene=c}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,i,r)=>{if(!n){var s=1/0;for(h=0;h<e.length;h++){for(var[n,i,r]=e[h],a=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(a=!1,r<s&&(s=r));if(a){e.splice(h--,1);var l=i();void 0!==l&&(t=l)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[n,i,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[s,a,c]=n,l=0;if(s.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(c)var h=c(o)}for(t&&t(n);l<s.length;l++)r=s[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(h)},n=self.webpackChunktanks_js=self.webpackChunktanks_js||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[426],(()=>o(206)));i=o.O(i)})();